!function(a){EJSpeed.config({type:"{{",cache:!1}),a.state={url:null,module:null,action:null,id:null,params:null,reset:function(){a.state.url=null,a.state.module=null,a.state.action=null,a.state.id=null,a.state.params=null}},a.app="",a.init=function(){a.log({message:"BOOT",type:"info"}),a.route.init()}}(window.gravity=window.gravity||{},jQuery),gravity.config={},gravity.compile=function(a){gravity.log({message:"COMPILE",type:"info"});var b="",c=null;"string"==typeof a?b=a:(b=a.template,c=a.data||null);var d=new EJSpeed({text:b}).render(c);gravity.dom({target:"div#gravity-stage",compiledHtml:d})},gravity.core=function(){gravity.log({message:"CORE",type:"info"}),"string"==typeof gravity.app[gravity.state.module]||!gravity.app[gravity.state.module]&&gravity.state.url?gravity.load({dataType:"html"}):gravity.app[gravity.state.module]&&(gravity.state.action&&gravity.app[gravity.state.module][gravity.state.action]?(gravity.log({message:"["+gravity.state.module+"."+gravity.state.action+"]",type:"info"}),gravity.app[gravity.state.module][gravity.state.action]()):(gravity.log({message:"["+gravity.state.module+".index]",type:"info"}),gravity.app[gravity.state.module].index()))},gravity.dom=function(a){gravity.log({message:"DOM",type:"info"}),a.target&&"string"==typeof a.compiledHtml&&$(a.target).html(a.compiledHtml),gravity.render()},gravity.dom.empty=function(a){$(a.target).empty()},gravity.error=function(a){gravity.log({message:a.status,type:"error"}),gravity.state.reset(),gravity.state.url="system/error.html",gravity.load({url:"system/error.html",callback:function(b){gravity.compile({data:a,template:b})}})},gravity.fn={contains:function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return!0;return!1}},gravity.load=function(a,b,c){var a=a,b=b;gravity.log({message:"LOAD ["+gravity.state.url+"]",type:"info"});var d=null;$.ajax({url:a,success:function(a){d=a},error:function(a){switch(d=a,a.status){case 400:case 401:case 404:case 408:case 206:case 500:case 501:case 502:case 503:default:gravity.error(d)}return!1}}).done(function(){b(d)})},gravity.log=function(a){var a=a||{},b={};b.message="string"==typeof a?a:a.message,b.type=a.type||"log",b.message="GRAVITY: "+b.message||"GRAVITY: Unknown error",console[b.type](b.message)},gravity.process=function(){gravity.log({message:"PROCESS",type:"info"})},gravity.render=function(){gravity.log({message:"RENDER",type:"info"})},gravity.route={init:function(){gravity.log({message:"ROUTE",type:"info"}),$(window).on("hashchange",function(a){a.preventDefault(),a.stopPropagation();var b=window.location.hash,c=[];gravity.state.reset(),b.indexOf("#/")>-1?(c=b.substring(2).split("/"),gravity.state.url=b.substring(2),gravity.log({message:"Identified route: "+c.join(),type:"info"}),/^[a-z0-9]+$/i.test(c[0])&&gravity.app.hasOwnProperty([c[0]])?(gravity.state.module=c[0],gravity.state.action=c[1]||null,gravity.state.id=c[2]||null,gravity.state.params=c[3]||null,gravity.core()):(gravity.log({message:'The module "'+c[0]+'" does not exist, loading /'+c.join("/")+".html instead.",type:"log"}),gravity.core())):(gravity.log({message:"No routes specified, loading default ["+gravity.app.index+"] instead",type:"log"}),gravity.state.url=gravity.app.index,gravity.core())}),$(window).trigger("hashchange")},go:function(){}};