!function(a){EJSpeed.config({type:"{{",cache:!1}),a.state={url:null,module:null,id:null,action:null,params:null,reset:function(){a.state.url=null,a.state.module=null,a.state.id=null,a.state.action=null,a.state.params=null}},a.app="",a.init=function(){a.route()}}(window.gravity=window.gravity||{},jQuery),gravity.config={},gravity.compile=function(a){a=a||null;var b=new EJSpeed({text:a}).render();gravity.render(b)},gravity.core=function(a){var b=a||"static";gravity.state.module&&"string"!=typeof gravity.app[gravity.state.module]?b="dynamic":"static"==b&&gravity.load({dataType:"html",callback:function(a){gravity.render(a)}})},gravity.dom=function(a){$(a.target).html(a.payload)},gravity.dom.empty=function(a){$(a.target).empty()},gravity.fn={contains:function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return!0;return!1}},gravity.load=function(a){var b,c=a.dataType||"html",d="";(gravity.state.url.indexOf(".html")>-1||"html"==c)&&(d="views/"+gravity.state.url,-1===d.indexOf(".html")&&(d+=".html")),$.ajax({url:d,type:"GET",dataType:c,success:function(a){b=a},error:function(a,b,c){return gravity.log({message:a.status+" "+c+" - "+a.responseText,type:"error"}),!1}}).done(function(){gravity.compile(b)})},gravity.log=function(a){var a=a||{},b={};b.message="string"==typeof a?a:a.message,b.type=a.type||"log",b.message="GRAVITY: "+b.message||"GRAVITY: Unknown error",console[b.type](b.message)},gravity.render=function(a){"string"==typeof a&&$("div#gravity-stage").html(a)},gravity.route=function(){$(window).on("hashchange",function(a){a.preventDefault(),a.stopPropagation();var b=window.location.hash,c=[];if(gravity.state.reset(),gravity.state.url=b.substring(2),b.indexOf("#/")>-1)if(c=b.substring(2).split("/"),gravity.state.url=b.substring(2),gravity.log({message:"Route: "+c.join(),type:"info"}),/^[a-z0-9]+$/i.test(c[0])&&gravity.app.hasOwnProperty([c[0]]))gravity.state.module=c[0],gravity.state.id=c[1],gravity.state.action=c[2],gravity.state.params=c[3],gravity.core();else{gravity.log({message:'The module "'+c[0]+'" does not exist, loading '+c[0]+".html instead.",type:"info"});{gravity.state.url}gravity.state.reset(),gravity.state.module="404",gravity.core()}else gravity.state.url=gravity.app.index,gravity.log('Routing to "'+gravity.app.index+'"'),gravity.core("static")}),$(window).trigger("hashchange")};