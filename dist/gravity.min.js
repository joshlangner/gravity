!function(a){EJSpeed.config({type:"{{",cache:!1}),a.state={url:"",module:"",id:"",action:"",params:"",reset:function(){a.state={url:"",module:"",id:"",action:"",params:""}}},a.app="",a.init=function(){a.route()}}(window.gravity=window.gravity||{},jQuery),gravity.config={},gravity.core=function(a){"string"==typeof a&&"static"==a&&gravity.load({type:"html",callback:function(a){gravity.render(a)}})},gravity.dom=function(a){$(a.target).html(a.payload)},gravity.dom.empty=function(a){$(a.target).empty()},gravity.fn={contains:function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return!0;return!1}},gravity.load=function(a){if(a.type&&"html"==a.type){var b=new EJSpeed({url:"views/"+gravity.state.url+".html"}).render();a.callback(b)}else{var c;$.ajax({url:url,type:"GET",dataType:"json",success:function(a){c=a},error:function(a,b,c){return gravity.log({message:c,type:"error"}),!1}}).done(function(){})}},gravity.log=function(a){var a=a||{},b={};b.message="string"==typeof a?a:a.message,b.type=a.type||"log",b.message="GRAVITY: "+b.message||"GRAVITY: Unknown error",console[b.type](b.message)},gravity.render=function(a){"string"==typeof a&&$("div#gravity-stage").html(a)},gravity.route=function(){$(window).on("hashchange",function(a){a.preventDefault(),a.stopPropagation();var b=window.location.hash,c=[];gravity.state={url:b.substring(2)},b.indexOf("#/")>-1?(c=b.substring(2).split("/"),gravity.log({message:c.join(),type:"info"}),/^[a-z0-9]+$/i.test(c[0])&&gravity.app.hasOwnProperty([c[0]])?(gravity.state={module:c[0],id:c[1],action:c[2],params:c[3]},gravity.core("string"==typeof gravity.app[c[0]]?"static":"dynamic")):(gravity.log({message:'The module "'+c[0]+'" does not exist, loading '+c[0]+".html instead.",type:"info"}),gravity.core("static"))):(gravity.log('Routing to "'+gravity.app.def+'"'),gravity.app.def)}),$(window).trigger("hashchange")};